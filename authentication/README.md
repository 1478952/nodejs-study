## 인증 추가

### 인증이란?

### 인증 구현 방법

사용자가 서버에 로그인요청을 보냄 서버에서 validation 체크를함 db에 존재하는지 확인 존재하면 사용자 세션을 생성하여 세션이 사용자를 인식함.
세션에 속한 쿠키를 브라우저에 저장하면 인증이 완료됨

### 인증 플로우 구현

### 비밀번호 암호화하기

### 로그인 기능 추가하기

### 라우트 보호 작업

### 미들웨어를 사용한 라우트 보호

### CSRF 공격의 이해

사이트간 요청 위조
세션을 악용하고 앱 사용자를 속여 악성코드를 실행하도록 하는 특수한 공격 방법 또는 접근법

인터넷 뱅킨 앱이라면 to B 로 돈을 보낼수 잇꼬 앱에서 결제과정을 완성했다면 주소를 입력하여 상품을 주문할 수 있다.
csrf 공격에서는 사용지를 속여 가짜 사이트로 이동하게함 이는 이메일로 링크를 보내는 등과 같은 방법을 통함.
원본사이트와 동일한 것 같아 보이지만 사실은 다른 페이지임 해당 사이트에는 실제 사이트로 요청을 보내며 B 대신 다른 사람에게 돈을 보내는
필드를 추가하는등 할 수 있다.

우리가 렌더링한 뷰에서만 세션을 사용할 수 있도록 해야한다. 그렇게하면 실제페이지와 비슷하나 가짜페이지에서는 세션을 사용할 수 없다
이를 위해 csrf 토큰을 사용함.

csurf는 더이상 사용되지 않으며 아래 라이브러리를 사용해야한다.

https://www.npmjs.com/package/csrf-csrf

### CSRF 토큰 사용하기

### csurf()의 대안

### 사용자 피드백 제공하기

### 플래시 메시지 완성

인증은 모든 페이지 방문자가 모든것을 보거나 하는것을 제한하는 것
사용자가 인증여부를 속일 수 없도록 서버측에서 진행되어야함
인증상태를 저장하는데 세션을 사용함 이 세션으로 제어되는 로그인 상태를 요청이 컨트롤러 액션에 도달하기 전에
검사해서 라우트 또는 라우트에서 실행되는 일반적인 코드를 보호할 수 있다.
인증은 보안 및 원할한 사용자 경험제공과 밀접하게 관련되어 있다 따라서 비밀번호는 반드시 해쉬 된 형태로 저장해야 한다.
일반 텍스트로 저장하면 데이터베이스가 노출되었을 때 공격자가 모든 사용자 계정에 엑세스 할 수 있다.
또한 csrf 공격 사이트간 요청 위조 공격은 세션을 가로 챌 수 있는 심각한 문제로 출시하려는 앱에서 csrf방어를 구축해야한다.
